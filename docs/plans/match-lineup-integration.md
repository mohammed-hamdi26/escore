# ุฎุทุฉ ุฏูุฌ ุงูุชุดูููุงุช ูู ุตูุญุฉ ุงููุงุชุด

## ูุธุฑุฉ ุนุงูุฉ

ููู ุฅุฏุงุฑุฉ ุงูุชุดูููุงุช (Lineups) ูู ุตูุญุฉ ุงููุฑู ุฅูู ุตูุญุฉ ุฅุถุงูุฉ/ุชุนุฏูู ุงููุงุชุดุ ุจุญูุซ ูุชู ุงุฎุชูุงุฑ ุงููุงุนุจูู ููู ูุฑูู ูุจุงุดุฑุฉ ุฃุซูุงุก ุฅูุดุงุก ุงููุงุชุด.

## ุงููุถุน ุงูุญุงูู

### ุงูููููุงุช ุงูููุฌูุฏุฉ:
- `MatchesFrom.jsx` - ููุฑู ุฅุถุงูุฉ/ุชุนุฏูู ุงููุงุชุด (ุจุฏูู ุชุดูููุงุช)
- `TeamLineup.jsx` - ูููู ูุฅุถุงูุฉ ุงูุชุดูููุฉ (ููุณุชุฎุฏู ูู dialog ูููุตู)
- `lineupsApi.js` - API ูุฌูุจ ุงูุชุดูููุงุช
- `addLineUp` action - ูุฅุถุงูุฉ ุชุดูููุฉ ุฌุฏูุฏุฉ

### API Structure:
```javascript
// ุฅุถุงูุฉ ุชุดูููุฉ
POST /lineups
{
  match: { id: "matchId" },
  team: { id: "teamId" },
  players: [{ id: "playerId1" }, { id: "playerId2" }, ...]
}
```

## ุงููุชุทูุจุงุช ุงูุฌุฏูุฏุฉ

1. **ูู ููุฑู ุงููุงุชุด**: ุจุนุฏ ุงุฎุชูุงุฑ Team 1 ู Team 2ุ ูุธูุฑ ูุณู ูุงุฎุชูุงุฑ ุงููุงุนุจูู ููู ูุฑูู
2. **ุฌูุจ ุงููุงุนุจูู**: ุนูุฏ ุงุฎุชูุงุฑ ูุฑููุ ูุชู ุฌูุจ ูุงุนุจูู ุชููุงุฆูุงู
3. **ุงุฎุชูุงุฑ ูุชุนุฏุฏ**: ุฅููุงููุฉ ุงุฎุชูุงุฑ ุฃูุซุฑ ูู ูุงุนุจ ููุชุดูููุฉ
4. **ุฅุฑุณุงู ุงูุจูุงูุงุช**: ุนูุฏ ุญูุธ ุงููุงุชุดุ ูุชู ุฅุฑุณุงู ุงูุชุดูููุงุช ูุนู

## ูููู ุงููููุงุช

```
components/Matches Management/
โโโ MatchesFrom.jsx          # ุชุญุฏูุซ - ุฅุถุงูุฉ ูุณู ุงูุชุดูููุงุช
โโโ MatchLineupSelector.jsx  # ุฌุฏูุฏ - ูููู ุงุฎุชูุงุฑ ุงูุชุดูููุฉ ููุฑูู ูุงุญุฏ
โโโ TeamLineup.jsx           # ููุฌูุฏ - ูููู ุงูุงุณุชูุงุฏุฉ ููู

app/[locale]/_Lib/
โโโ palyerApi.js             # ููุฌูุฏ - getPlayersByTeam
โโโ actions.js               # ููุฌูุฏ - addLineUp
```

## ุฎุทูุงุช ุงูุชูููุฐ

### ุงููุฑุญูุฉ 1: ูููู ุงุฎุชูุงุฑ ุงูุชุดูููุฉ

#### 1.1 ุฅูุดุงุก `MatchLineupSelector.jsx`
**ุงูููู:** `components/Matches Management/MatchLineupSelector.jsx`

```jsx
// ูููู ูุธูุฑ:
// - ุงุณู ุงููุฑูู ูุดุนุงุฑู
// - ูุงุฆูุฉ ุงููุงุนุจูู ูุน checkboxes ููุงุฎุชูุงุฑ
// - ุนุฏุฏ ุงููุงุนุจูู ุงููุฎุชุงุฑูู
// - ุฅููุงููุฉ "ุงุฎุชูุงุฑ ุงููู" ุฃู "ุฅูุบุงุก ุงููู"
```

**ุงููููุฒุงุช:**
- ูุณุชูุจู `teamId` ููุฌูุจ ุงููุงุนุจูู ุชููุงุฆูุงู
- ูุนุฑุถ ุงููุงุนุจูู ูู ุฌุฏูู/ูุงุฆูุฉ ูุน checkboxes
- ููุฑุฌุน ูุงุฆูุฉ ุงูู IDs ุงููุฎุชุงุฑุฉ ููู parent component

### ุงููุฑุญูุฉ 2: ุชุญุฏูุซ ููุฑู ุงููุงุชุด

#### 2.1 ุชุญุฏูุซ `MatchesFrom.jsx`

**ุงูุชุบููุฑุงุช:**
1. ุฅุถุงูุฉ state ููุงุนุจูู ุงููุฎุชุงุฑูู ููู ูุฑูู:
```javascript
team1Lineup: [],
team2Lineup: [],
```

2. ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ ุจุนุฏ ุงุฎุชูุงุฑ ุงููุฑู:
```jsx
{formik.values.team1 && (
  <MatchLineupSelector
    teamId={formik.values.team1}
    selectedPlayers={formik.values.team1Lineup}
    onSelectionChange={(players) => formik.setFieldValue("team1Lineup", players)}
  />
)}
```

3. ุชุญุฏูุซ `onSubmit`:
```javascript
// ุจุนุฏ ุฅูุดุงุก ุงููุงุชุด ุจูุฌุงุญุ ุฅุถุงูุฉ ุงูุชุดูููุงุช
if (team1Lineup.length > 0) {
  await addLineUp({
    match: { id: matchId },
    team: { id: team1 },
    players: team1Lineup.map(id => ({ id }))
  });
}
// ููุณ ุงูุดูุก ููู team2
```

### ุงููุฑุญูุฉ 3: ุชุญุฏูุซ ุงูุชุฑุฌูุฉ

**ุงููููุงุช:** `messages/en.json`, `messages/ar.json`

```json
{
  "MatchForm": {
    "Team Lineup": "Team Lineup",
    "Select Players": "Select Players",
    "Selected Players": "Selected Players",
    "Select All": "Select All",
    "Clear All": "Clear All",
    "No players available": "No players available",
    "Loading players": "Loading players..."
  }
}
```

### ุงููุฑุญูุฉ 4: ุตูุญุฉ ุงูุชุนุฏูู

#### 4.1 ุชุญุฏูุซ ุตูุญุฉ ุชุนุฏูู ุงููุงุชุด
- ุฌูุจ ุงูุชุดูููุงุช ุงูุญุงููุฉ ูููุงุชุด
- ุนุฑุถูุง ูู ุงููููู ูุน ุฅููุงููุฉ ุงูุชุนุฏูู
- ุญุฐู ุงูุชุดูููุฉ ุงููุฏููุฉ ูุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ ุนูุฏ ุงูุญูุธ

## Data Flow

```
MatchesFrom
    โ
    โโโ ุงุฎุชูุงุฑ Tournament โโโบ ุชุญุฏูุซ Games ุงููุชุงุญุฉ
    โ
    โโโ ุงุฎุชูุงุฑ Game โโโบ ุชุญุฏูุซ Teams ุงููุชุงุญุฉ
    โ
    โโโ ุงุฎุชูุงุฑ Team 1 โโโบ MatchLineupSelector
    โ                         โ
    โ                         โโโ getPlayersByTeam(team1Id)
    โ                         โ
    โ                         โโโ ุนุฑุถ ุงููุงุนุจูู + Checkboxes
    โ                                    โ
    โ                                    โผ
    โ                              team1Lineup[]
    โ
    โโโ ุงุฎุชูุงุฑ Team 2 โโโบ MatchLineupSelector
    โ                         โ
    โ                         โโโ team2Lineup[]
    โ
    โโโ Submit
         โ
         โโโ 1. addMatch(matchData) โโโบ matchId
         โ
         โโโ 2. addLineUp({ match: matchId, team: team1, players: team1Lineup })
         โ
         โโโ 3. addLineUp({ match: matchId, team: team2, players: team2Lineup })
```

## UI/UX

### ุดูู ูุณู ุงูุชุดูููุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ Team 1 Lineup                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [โ] Select All    [Clear All]    (5 selected)  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ [โ] Player1 - AWPer           ๐ฉ๐ช           โโ
โ  โ [โ] Player2 - Rifler          ๐ซ๐ท           โโ
โ  โ [ ] Player3 - Support         ๐บ๐ธ           โโ
โ  โ [โ] Player4 - Entry           ๐ง๐ท           โโ
โ  โ [โ] Player5 - IGL             ๐ฉ๐ฐ           โโ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## API Calls Sequence

```
1. GET /tournaments              โบ ูุงุฆูุฉ ุงูุจุทููุงุช
2. GET /teams                    โบ ูุงุฆูุฉ ุงููุฑู
3. GET /players?team.id.equals=X โบ ูุงุนุจู ุงููุฑูู 1
4. GET /players?team.id.equals=Y โบ ูุงุนุจู ุงููุฑูู 2
5. POST /matches                 โบ ุฅูุดุงุก ุงููุงุชุด
6. POST /lineups                 โบ ุชุดูููุฉ ุงููุฑูู 1
7. POST /lineups                 โบ ุชุดูููุฉ ุงููุฑูู 2
```

## ุงูุงุฎุชุจุงุฑุงุช

### Unit Tests
```javascript
describe('MatchLineupSelector', () => {
  it('fetches players when teamId changes');
  it('allows selecting multiple players');
  it('returns selected player IDs');
  it('shows loading state');
  it('handles empty player list');
});

describe('MatchesFrom with Lineup', () => {
  it('shows lineup selector after team selection');
  it('submits lineups with match');
  it('handles lineup submission errors');
});
```

## ุญุฐู ุงููููุงุช ุบูุฑ ุงููุทููุจุฉ

ุจุนุฏ ุงูุชูููุฐุ ูููู ุญุฐู:
- `app/[locale]/dashboard/teams-management/lineups/` (ุตูุญุฉ ุงูุชุดูููุงุช ูู ุงููุฑู)
- `components/teams management/TeamLineupHeader.jsx`
- `components/teams management/TeamLineupTable.jsx`

ุฃู ุงูุฅุจูุงุก ุนูููุง ูู "ุนุฑุถ ููุท" ููุชุดูููุงุช.

## ููุงุญุธุงุช

1. **ุงูุชุดูููุฉ ุงุฎุชูุงุฑูุฉ**: ูุง ูุฌุจ ูุฑุถ ุงุฎุชูุงุฑ ุชุดูููุฉ - ุงููุงุชุด ูููู ุญูุธู ุจุฏูููุง
2. **ุงูุชุญูู ูู ุงูุนุฏุฏ**: ูููู ุฅุถุงูุฉ validation ูุนุฏุฏ ุงููุงุนุจูู (ูุซูุงู 5 ูุงุนุจูู ููู CS)
3. **Error Handling**: ุฅุฐุง ูุดู ุฅุฑุณุงู ุงูุชุดูููุฉ ุจุนุฏ ุฅูุดุงุก ุงููุงุชุดุ ูุฌุจ ุฅุธูุงุฑ ุฑุณุงูุฉ ูุงุถุญุฉ
4. **Edit Mode**: ูู ูุถุน ุงูุชุนุฏููุ ูุฌุจ ุญุฐู ุงูุชุดูููุฉ ุงููุฏููุฉ ูุจู ุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ

## Dependencies

- ูุง ุชูุฌุฏ ููุชุจุงุช ุฌุฏูุฏุฉ ูุทููุจุฉ
- ูุณุชุฎุฏู: `@radix-ui/react-checkbox`, `lucide-react`
